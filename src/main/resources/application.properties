# === App Config ===
spring.application.name=reservation-service
spring.config.import=optional:file:.env[.properties],optional:file:./UPLEARN/.env[.properties]

# === Mongo ===
# Usa variables de entorno del .env
spring.data.mongodb.uri=${DB_URI}
spring.data.mongodb.database=${DB_NAME}
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
spring.data.mongodb.auto-index-creation=true

# === Server & Timezone ===
server.port=8090
spring.jackson.time-zone=America/Bogota

# === CORS ===
app.cors.allowed-origins=http://localhost:5173,http://localhost:3000,http://localhost:8080

# === Users service (Online Tutoring) ===
# Usa variable de entorno, con localhost como valor por defecto
user.service.base-url=${USER_SERVICE_BASE_URL:http://localhost:8080}
# Ruta estática, usa variable de entorno para sobreescritura (aunque es poco común)
user.service.profile-path=${USER_SERVICE_PROFILE_PATH:/Api-user/public/profile}

# === Caches (Usa valores de entorno con valores por defecto estáticos) ===
# NOTA: Los valores por defecto coinciden con el .env, pero Spring busca en .env primero.
roles.cache.ttl-seconds=${ROLES_CACHE_TTL:240}
roles.cache.max-size=${ROLES_CACHE_MAX:10000}
# Cache de perfiles hereda de roles si no se define en .env
profiles.cache.ttl-seconds=${PROFILES_CACHE_TTL:${ROLES_CACHE_TTL:240}}
profiles.cache.max-size=${PROFILES_CACHE_MAX:${ROLES_CACHE_MAX:10000}}

# === Logging & Errors ===
# Se deja la configuración más detallada (DEBUG)
logging.level.edu.eci.arsw=DEBUG
logging.level.org.springframework.data.mongodb=DEBUG
server.error.include-message=always
server.error.include-stacktrace=always